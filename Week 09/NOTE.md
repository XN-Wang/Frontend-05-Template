学习笔记
### HTML Parser
#### 第三步总结
* 主要解析三种标签：开始标签吗，结束标签和自封闭标签

#### 第五步总结
* 属性值分为单引号、双引号、无引号三种写法，因此需要较多状态处理
* 处理属性的方式和标签类似，用全局变量暂存属性，待属性解析完成后添加到标签Token上

#### 第六步总结
* 从标签构建DOM树的基本技巧是使用栈
* 遇到开始标签时创建元素并入栈，遇到结束标签时出栈
* 自封闭节点可视为入栈后立刻出栈
* 任何元素的父元素是它入栈前的栈顶

### CSS Compute
#### 第二步总结
* 创建一个元素后，立即计算CSS
* 在真实浏览器中，会遇到写在body的style标签，需要重新计算css

#### 第三步总结
* 在计算CSS函数中，我们必须知道当前元素的所有父元素才能判断元素是否与规则匹配
* 因为获取的时当前元素，所以计算匹配的时候，是从内向外， 从子元素到父元素的

#### 第四步总结
* 选择器也要从当前元素向外排列
* 复杂选择器根据空格拆分成针对单个元素的选择器，用循环匹配父元素队列

#### 第七步总结
* CSS 规则根据 specificity 和后来优先规则覆盖
* specificity 是一个四元组，越左边的权重越高，[inline id class tag]
* 一个 CSS 规则的 specificity 根据包含的简单选择器相加而成

通过进位制的比较，来比较样式选择器的优先级。 
[0,1,0,2]
[0,2,0,1]
这两条，从左往右比较，第二位就能决定出来优先级。